# ğŸš€ Coach Setter IA - Dashboard MVP - PRD Production Ready (Version Finale)

## ğŸ“‹ Vue d'ensemble

**Objectif** : Dashboard multi-tenant fonctionnel en production pour 50 coachs avec 35 KPIs temps rÃ©el.

**Stack Technique** :
- Frontend : React + TypeScript + Tailwind (Vite)
- Backend : Supabase (Auth + PostgreSQL + Edge Functions)
- Automation : N8N â†’ Supabase (connexion validÃ©e)
- DÃ©ploiement : Coolify sur Hostinger

**Flow de donnÃ©es** :
```
ManyChat (Instagram DM) â†’ N8N (IA + qualification) â†’ Supabase â†’ React Dashboard
```

**Note importante** : Ce projet s'appuie sur un schÃ©ma Supabase existant. Les modifications nÃ©cessaires sont documentÃ©es dans `SUPABASE_MIGRATIONS.sql` (rÃ©fÃ©rencÃ© mais non inclus dans ce PRD).

---

## ğŸ¯ Scope MVP

### IN SCOPE
- Auth Supabase multi-tenant avec RLS strict
- Dashboard lecture seule avec 35 KPIs calculÃ©s
- Panel admin pour crÃ©ation de coachs
- Calcul KPIs temps rÃ©el (vue matÃ©rialisÃ©e + cron pg_cron)
- Seed data rÃ©alistes (60+ leads de test)
- Design responsive moderne
- Health check endpoint
- DÃ©ploiement production sur Coolify

### OUT OF SCOPE
- Ã‰dition manuelle des leads dans le dashboard
- CRM drag & drop interactif
- Notifications push/email/Telegram
- Export CSV avancÃ© avec filtres
- Dark mode toggle
- Onboarding guidÃ© interactif
- Graphiques interactifs complexes (hover, zoom, drill-down)
- Filtres date custom avec date picker

---

## ğŸ—‚ï¸ Architecture Base de DonnÃ©es

### Tables Principales (SchÃ©ma existant)

Le projet utilise les tables suivantes de votre base Supabase :

#### `coachs`
Table principale des coachs (dÃ©jÃ  existante).
- `id` (uuid, PK)
- `name` (text) - Nom complet du coach
- `specialty` (text) - SpÃ©cialitÃ© (fitness, musculation, yoga, etc.)
- `email` (text, unique)
- `created_at` (timestamptz)

#### `leads`
Profil complet des prospects (dÃ©jÃ  existante, sera enrichie).
- `id` (uuid, PK)
- `coach_id` (uuid, FK â†’ coachs.id)
- `user_id_instagram` (text, unique) - ID Instagram principal
- `contact_id` (text) - ID ManyChat (Ã  ajouter)
- `first_name`, `last_name` (text)
- `email` (text)
- `age` (int)
- `gender` (text)
- `job_title` (text) - MÃ©tier du prospect
- `lead_status` (text) - Statut existant
- `status` (text) - Nouveau statut normalisÃ© (Ã  ajouter)
- `source` (text) - Origine du lead
- `total_messages_sent`, `total_messages_received` (int) - Ã€ ajouter
- `time_to_action_minutes` (int) - Temps avant conversion (Ã  ajouter)
- `deal_value` (numeric) - Valeur du deal si gagnÃ© (Ã  ajouter)
- `created_at`, `updated_at` (timestamptz)

#### `messages`
Historique complet des conversations (dÃ©jÃ  existante, sera enrichie).
- `id` (uuid, PK)
- `lead_id` (uuid, FK â†’ leads.id)
- `coach_id` (uuid, FK â†’ coachs.id)
- `text` (text)
- `direction` (text) - 'in' ou 'out'
- `message_number` (int) - Position dans la sÃ©quence (Ã  ajouter)
- `is_replied` (boolean) - Si rÃ©ponse reÃ§ue (Ã  ajouter)
- `replied_at` (timestamptz) - Date de rÃ©ponse (Ã  ajouter)
- `created_at` (timestamptz)

#### `message_sequences` (NOUVELLE)
Table pour tracking prÃ©cis des taux de rÃ©ponse par message.
- `id` (uuid, PK)
- `coach_id` (uuid, FK)
- `lead_id` (uuid, FK)
- `msg1_sent_at`, `msg1_replied`, `msg1_replied_at`
- `msg2_sent_at`, `msg2_replied`, `msg2_replied_at`
- `msg3_sent_at`, `msg3_replied`, `msg3_replied_at`
- `msg4_sent_at`, `msg4_replied`, `msg4_replied_at`
- `call_proposed_at`, `call_booked_at`
- `created_at`

#### `kpi_daily`
AgrÃ©gation quotidienne des KPIs (dÃ©jÃ  existante, sera enrichie).
- `id` (uuid, PK)
- `coach_id` (uuid, FK)
- `date` (date)
- Colonnes existantes : `total_dms`, `qualified_leads`, `calls_proposed`, `calls_booked`, etc.
- Colonnes Ã  ajouter : `response_rate_msg1-4`, `leads_won`, `leads_lost`, `total_revenue`, etc.

### Vue MatÃ©rialisÃ©e Performance

**`coach_dashboard_kpis`** : Vue prÃ©-calculÃ©e pour affichage ultra-rapide du dashboard.

Contient par `coach_id` :
- Compteurs de volume (total_leads, leads_today, leads_week, messages_sent)
- RÃ©partition pipeline (new_leads, engaged, qualified, calls_proposed, calls_booked, won, lost, relance)
- Taux de conversion (qualification_rate, call_booking_rate, lost_rate)
- Moyennes (avg_messages_per_lead, avg_time_to_action)
- ROI (total_revenue, deals_count)
- DÃ©mographie (male_count, female_count, avg_age)
- Timestamp de derniÃ¨re mise Ã  jour

**Refresh** : Automatique toutes les 5 minutes via pg_cron.

### Fonctions SQL Utilitaires

**`get_response_rates(coach_id)`** : Calcule les taux de rÃ©ponse msg 1-4.

**`get_top_sources(coach_id, limit)`** : Top N sources de leads avec %.

**`get_top_professions(coach_id, limit)`** : Top N mÃ©tiers avec %.

**`get_leads_to_followup(coach_id)`** : Liste leads Ã  relancer avec prioritÃ© (high/medium/low).

### Row Level Security (RLS)

Toutes les tables principales ont RLS activÃ© avec politique :
```sql
CREATE POLICY "coaches_own_data" ON [table]
  FOR ALL USING (coach_id = auth.uid());
```

Garantit isolation totale des donnÃ©es entre coachs.

---

## ğŸ”§ Backend - Supabase Edge Functions

### Edge Function : `create-coach`

**Endpoint** : `POST /functions/v1/create-coach`

**Payload** :
```json
{
  "email": "nouveau@coach.fr",
  "name": "Nouveau Coach",
  "specialty": "fitness"
}
```

**Fonctionnement** :
1. CrÃ©e user dans `auth.users` (Supabase Auth)
2. GÃ©nÃ¨re mot de passe alÃ©atoire
3. Insert automatique dans table `coachs` (via ID auth)
4. GÃ©nÃ¨re magic link pour reset password
5. Retourne `coach_id` et `magic_link`

**SÃ©curitÃ©** : Requiert `SERVICE_ROLE_KEY` (admin only).

**Variables d'environnement** :
- `SUPABASE_URL`
- `SUPABASE_SERVICE_ROLE_KEY`
- `APP_URL` (pour redirect aprÃ¨s reset password)

---

## ğŸ’» Frontend - Architecture React

### Structure Projet

```
src/
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ supabase.ts           # Client Supabase
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAuth.ts            # Gestion auth & session
â”‚   â”œâ”€â”€ useDashboardKPIs.ts   # Hook KPIs principaux
â”‚   â”œâ”€â”€ useResponseRates.ts   # Hook taux rÃ©ponse
â”‚   â”œâ”€â”€ useTopSources.ts      # Hook top sources
â”‚   â”œâ”€â”€ useTopProfessions.ts  # Hook top mÃ©tiers
â”‚   â”œâ”€â”€ useLeadsToFollowup.ts # Hook leads Ã  relancer
â”‚   â””â”€â”€ useCoach.ts           # Hook info coach
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”œâ”€â”€ KPICard.tsx       # Carte KPI avec icÃ´ne
â”‚   â”‚   â”œâ”€â”€ ProgressBar.tsx   # Barre progression
â”‚   â”‚   â”œâ”€â”€ Badge.tsx         # Label colorÃ© statut
â”‚   â”‚   â””â”€â”€ StatRow.tsx       # Ligne statistique
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”œâ”€â”€ ActivitySection.tsx      # Section 1 : ActivitÃ©
â”‚   â”‚   â”œâ”€â”€ ResponseRatesSection.tsx # Section 2 : Taux rÃ©ponse
â”‚   â”‚   â”œâ”€â”€ ConversionSection.tsx    # Section 3 : Conversion
â”‚   â”‚   â”œâ”€â”€ DemographySection.tsx    # Section 4 : DÃ©mographie
â”‚   â”‚   â”œâ”€â”€ PipelineSection.tsx      # Section 5 : Pipeline
â”‚   â”‚   â””â”€â”€ PerformanceSection.tsx   # Section 6 : Performance
â”‚   â””â”€â”€ DashboardLayout.tsx   # Layout avec sidebar
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ Login.tsx             # Page connexion
â”‚   â”œâ”€â”€ Dashboard.tsx         # Page dashboard coach
â”‚   â”œâ”€â”€ Admin.tsx             # Page admin crÃ©ation coach
â”‚   â””â”€â”€ Health.tsx            # Health check endpoint
â””â”€â”€ App.tsx                   # Router principal
```

### Routes

```
/ â†’ Redirect vers /login ou /dashboard selon auth
/login â†’ Page connexion
/dashboard â†’ Dashboard coach (protected)
/admin â†’ Panel admin (protected, admin only)
/health â†’ Health check (public)
```

### Custom Hooks Principaux

#### `useAuth()`
GÃ¨re authentification et session.

**Retour** :
- `user` : Objet user Supabase ou null
- `loading` : Boolean Ã©tat chargement
- `signIn(email, password)` : Fonction login
- `signOut()` : Fonction logout

#### `useDashboardKPIs(coachId)`
Fetch KPIs depuis vue matÃ©rialisÃ©e.

**Retour** :
- `kpis` : Objet avec tous les KPIs ou null
- `loading` : Boolean

**DonnÃ©es** :
```typescript
{
  total_leads: number
  leads_today: number
  leads_week: number
  total_messages_sent: number
  new_leads: number
  engaged_leads: number
  qualified_leads: number
  calls_proposed: number
  calls_booked: number
  leads_won: number
  leads_lost: number
  leads_relance: number
  qualification_rate: number
  call_booking_rate: number
  lost_rate: number
  avg_messages_per_lead: number
  avg_time_to_action_minutes: number
  total_revenue: number
  male_count: number
  female_count: number
  avg_age: number
  last_updated: string
}
```

#### `useResponseRates(coachId)`
Appelle fonction SQL `get_response_rates`.

**Retour** :
```typescript
{
  rates: {
    msg1_rate: number
    msg2_rate: number
    msg3_rate: number
    msg4_rate: number
  }
}
```

#### `useTopSources(coachId, limit)`
Appelle fonction SQL `get_top_sources`.

**Retour** :
```typescript
{
  sources: Array<{
    source_name: string
    lead_count: number
    percentage: number
  }>
}
```

### Composants UI RÃ©utilisables

#### `<KPICard />`
Props :
- `title` : Titre du KPI
- `value` : Valeur principale
- `change?` : Pourcentage Ã©volution
- `icon` : Composant Lucide icon
- `suffix?` : Suffixe (â‚¬, %, etc.)

#### `<ProgressBar />`
Props :
- `value` : Valeur 0-100
- `label?` : Label optionnel
- `color?` : Couleur (blue/green/yellow/red)

#### `<Badge />`
Props :
- `children` : Contenu
- `variant?` : Couleur (blue/green/yellow/red/purple)

#### `<StatRow />`
Props :
- `label` : Label gauche
- `value` : Valeur droite

---

## ğŸ“Š Dashboard - Sections KPIs

### Section 1 : ActivitÃ© & Volume

**KPIs affichÃ©s** :
- Messages envoyÃ©s (total)
- Nombre de leads (total)
- Leads aujourd'hui
- Messages moyens par lead

**Graphiques** :
- Top 3 sources de leads (table avec %)
- Temps de discussion moyen (gros chiffre centrÃ©)

### Section 2 : Taux de RÃ©ponse

**KPIs affichÃ©s** (4 cartes) :
- Taux rÃ©ponse 1er message (avec barre progression)
- Taux rÃ©ponse 2Ã¨me message
- Taux rÃ©ponse 3Ã¨me message
- Taux rÃ©ponse 4Ã¨me message

**Badges statut** :
- 60%+ : "Excellent" (vert)
- 40-59% : "Bon" (jaune)
- <40% : "Ã€ amÃ©liorer" (rouge)

### Section 3 : Qualification & Conversion

**KPIs affichÃ©s** :
- Prospects qualifiÃ©s (count + taux %)
- Lead magnets envoyÃ©s (estimation 75% des qualifiÃ©s)
- Emails capturÃ©s (estimation 60% des qualifiÃ©s)

**Funnel** (4 Ã©tapes) :
1. Messages envoyÃ©s
2. QualifiÃ©s (%)
3. Calls proposÃ©s (%)
4. Calls rÃ©servÃ©s (%)

**Conversion calls** :
- Taux de conversion call (%)
- No-show estimÃ© (17% moyenne)

### Section 4 : DÃ©mographie

**KPIs affichÃ©s** :
- RÃ©partition genre (3 mini-cartes : Hommes %, Femmes %, Autre %)
- Ã‚ge moyen
- Top 5 professions (table avec %)

### Section 5 : Pipeline & Relances

**KPIs affichÃ©s** (4 cartes) :
- Leads nouveaux
- Leads gagnÃ©s
- Leads perdus (avec taux %)
- Leads Ã  relancer (avec taux %)

**Liste leads Ã  relancer** :
- Username Instagram
- Jours sans contact
- Badge prioritÃ© (haute/moyenne/basse)
- Statut actuel

**Raisons de perte** (top 5) :
- Prix trop Ã©levÃ©
- Manque de temps
- DÃ©jÃ  essayÃ©
- HÃ©sitation
- Autre

### Section 6 : Performance & ROI

**KPIs affichÃ©s** :
- ROI % (gros chiffre centrÃ© avec gradient)
- Revenus gÃ©nÃ©rÃ©s
- CoÃ»t acquisition (estimÃ© ou fixe pour MVP)
- EfficacitÃ© IA (94% par dÃ©faut pour MVP)
- Temps gagnÃ© vs humain (estimÃ© : 47h/mois)

**Indicateurs additionnels** :
- Meilleur moment conversion (jour + heure)
- Nombre de deals fermÃ©s

---

## ğŸ¨ Design System

### Palette Couleurs

```css
:root {
  --bg-dark: #0f172a;
  --bg-purple: #312e81;
  --bg-card: rgba(255, 255, 255, 0.1);
  --border: rgba(255, 255, 255, 0.2);
  
  --primary: #3b82f6;
  --success: #10b981;
  --warning: #f59e0b;
  --error: #ef4444;
  --purple: #8b5cf6;
  
  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.6);
}
```

### Composants Tailwind Standards

**Card glassmorphism** :
```tsx
className="bg-white/10 backdrop-blur-xl rounded-xl p-6 border border-white/20"
```

**Button gradient** :
```tsx
className="bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg px-4 py-2 hover:shadow-lg transition-all"
```

**Badge** :
```tsx
className="px-3 py-1 rounded-full text-xs font-semibold bg-blue-500/20 text-blue-400"
```

**Input** :
```tsx
className="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
```

### Typography

- **Headings** : Font-family system + font-weight 600-700
- **Body** : Font-family system + font-weight 400
- **Metrics** : Font-weight 700 + text-3xl Ã  5xl

---

## ğŸŒ± Seed Data

### Script Python

**Fichier** : `seed_data.py`

**Fonctionnement** :
1. RÃ©cupÃ¨re tous les `coach_id` depuis table `coachs`
2. GÃ©nÃ¨re 60 leads rÃ©alistes avec :
   - DonnÃ©es dÃ©mographiques (genre, Ã¢ge, mÃ©tier)
   - Statuts variÃ©s (new, engaged, qualified, won, lost, etc.)
   - Sources variÃ©es (story, post, keyword, dm_organique)
   - Messages envoyÃ©s/reÃ§us
   - Dates crÃ©ations Ã©talÃ©es sur 30 jours
   - Deal values pour leads "won"
3. Insert bulk dans table `leads`
4. GÃ©nÃ¨re messages associÃ©s dans table `messages`
5. GÃ©nÃ¨re sequences dans `message_sequences`

**PrÃ©requis** :
- Python 3.8+
- Library : `supabase-py`, `python-dotenv`
- Variables env : `SUPABASE_URL`, `SUPABASE_SERVICE_ROLE_KEY`

**ExÃ©cution** :
```bash
pip install supabase python-dotenv
python seed_data.py
```

**RÃ©sultat attendu** :
- 60+ leads crÃ©Ã©s
- 100+ messages crÃ©Ã©s
- 30+ sequences crÃ©Ã©es
- RÃ©partition rÃ©aliste par coach

---

## ğŸš€ DÃ©ploiement Coolify

### Configuration Projet

**Build settings** :
- Build command : `npm run build`
- Output directory : `dist`
- Install command : `npm install`

**Environment Variables** (Ã  configurer dans Coolify) :
- `VITE_SUPABASE_URL` : URL projet Supabase
- `VITE_SUPABASE_ANON_KEY` : ClÃ© publique Supabase

**Port** : 3000 (ou auto-detect)

**Health check** : `GET /health` doit retourner status 200

### Process de DÃ©ploiement

1. Push code sur repository Git (GitHub/GitLab)
2. CrÃ©er nouveau projet dans Coolify
3. Connecter repository
4. Configurer variables d'environnement
5. Lancer build
6. Coolify auto-deploy sur commit main

**Domaine** :
- Option 1 : Sous-domaine Coolify (ex: `app-xxx.coolify.io`)
- Option 2 : Domaine custom (ex: `dashboard.votredomaine.com`)
- HTTPS : Automatique via Let's Encrypt

### Dockerfile (optionnel)

Si besoin de contrÃ´le avancÃ© :

```dockerfile
FROM node:18-alpine AS build
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=build /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

---

## âœ… Checklist PrÃ©-DÃ©marrage

### Infrastructure
- [ ] Projet Supabase crÃ©Ã© et accessible
- [ ] Service Role Key rÃ©cupÃ©rÃ©e (admin)
- [ ] Anon Key rÃ©cupÃ©rÃ©e (public)
- [ ] N8N connectÃ© Ã  Supabase (node testÃ©)
- [ ] VPS Hostinger + Coolify actifs
- [ ] Repository Git initialisÃ©

### Database (RÃ©fÃ©rence : `SUPABASE_MIGRATIONS.sql`)
- [ ] Script migrations SQL exÃ©cutÃ©
- [ ] Colonnes ajoutÃ©es aux tables existantes
- [ ] Table `message_sequences` crÃ©Ã©e
- [ ] Indexes crÃ©Ã©s
- [ ] RLS activÃ© sur toutes tables
- [ ] Policies RLS crÃ©Ã©es
- [ ] Triggers auto-update crÃ©Ã©s
- [ ] Vue matÃ©rialisÃ©e `coach_dashboard_kpis` crÃ©Ã©e
- [ ] Extension pg_cron activÃ©e
- [ ] Cron job refresh KPIs configurÃ©
- [ ] Fonctions SQL crÃ©Ã©es (response_rates, top_sources, etc.)

### Seed Data
- [ ] Au moins 3 coachs existants dans table `coachs`
- [ ] Script `seed_data.py` prÃªt
- [ ] Variables env Python configurÃ©es
- [ ] Seed exÃ©cutÃ© avec succÃ¨s (60+ leads)
- [ ] VÃ©rification donnÃ©es dans Supabase Table Editor

### Backend
- [ ] Edge Function `create-coach` dÃ©ployÃ©e
- [ ] Variables env Edge Function configurÃ©es
- [ ] Test crÃ©ation coach via curl/Postman

### Frontend
- [ ] Projet Vite React TypeScript initialisÃ©
- [ ] DÃ©pendances installÃ©es (`@supabase/supabase-js`, `recharts`, `lucide-react`, etc.)
- [ ] Tailwind CSS configurÃ©
- [ ] Client Supabase configurÃ© (`src/lib/supabase.ts`)
- [ ] Variables env `.env` crÃ©Ã©es
- [ ] Structure folders crÃ©Ã©e (hooks, components, pages)

### Tests Critiques
- [ ] Login coach fonctionne (redirect dashboard)
- [ ] RLS testÃ© : coach A ne voit pas donnÃ©es coach B
- [ ] Dashboard affiche KPIs (non vides)
- [ ] Vue matÃ©rialisÃ©e se refresh (vÃ©rifier `last_updated`)
- [ ] Admin peut crÃ©er nouveau coach
- [ ] Magic link reÃ§u fonctionnel
- [ ] Responsive mobile OK
- [ ] Aucune erreur console

### Deploy
- [ ] Build local rÃ©ussi (`npm run build`)
- [ ] Preview local OK (`npm run preview`)
- [ ] Coolify projet configurÃ©
- [ ] Variables env production configurÃ©es
- [ ] Deploy rÃ©ussi
- [ ] HTTPS actif
- [ ] Health check rÃ©pond OK
- [ ] Dashboard accessible publiquement

---

## ğŸ“Š Success Metrics

### Fonctionnel (Go/No-Go)
- 3 coachs minimum peuvent se login avec comptes diffÃ©rents
- Chaque coach voit UNIQUEMENT ses donnÃ©es (RLS validÃ©)
- Dashboard affiche 35 KPIs sans erreurs
- Admin peut crÃ©er un nouveau coach
- App accessible via HTTPS sur domaine

### Technique
- Dashboard load time < 2 secondes
- Vue matÃ©rialisÃ©e refresh toutes les 5 min (vÃ©rifiable via `last_updated`)
- Aucune erreur JavaScript console
- Build production < 500KB gzipped
- Responsive : mobile, tablet, desktop

### UX
- Design moderne et professionnel
- Loading states sur tous les fetches
- Empty states si pas de donnÃ©es
- Transitions fluides entre pages
- Toast notifications (erreurs)

---

## ğŸš¨ Risques & Mitigations

| Risque | Impact | ProbabilitÃ© | Mitigation |
|--------|--------|-------------|------------|
| RLS mal configurÃ© (coach voit donnÃ©es autres) | CRITIQUE | Moyenne | Tester RLS dÃ¨s migration SQL. Script test automatique. |
| Vue matÃ©rialisÃ©e pas refresh auto | Ã‰levÃ© | Faible | VÃ©rifier cron job pg_cron. Fallback : refresh manuel. |
| Dashboard lent (>5s) | Ã‰levÃ© | Moyenne | Vue matÃ©rialisÃ©e + indexes. Cache navigateur. |
| N8N n'insÃ¨re plus dans Supabase | CRITIQUE | Faible | Monitoring N8N. Webhook fallback. Dead letter queue. |
| Deploy Coolify Ã©choue | Ã‰levÃ© | Faible | Tester build local. Dockerfile backup. Plan B : Vercel. |
| Seed data invalide | Moyen | Moyenne | Validation script Python. Rollback SQL si erreur. |

---

## ğŸ“¦ Livrables Finaux

### Code Source
- [ ] Repository Git complet avec historique
- [ ] README.md avec instructions setup
- [ ] `.env.example` avec toutes variables
- [ ] `package.json` avec toutes dÃ©pendances
- [ ] Structure folders documentÃ©e

### Database
- [ ] `SUPABASE_MIGRATIONS.sql` (script migrations)
- [ ] `seed_data.py` (script seed)
- [ ] Documentation schema (tables, colonnes, relations)
- [ ] Export policies RLS

### Backend
- [ ] Edge Function `create-coach` (code + doc)
- [ ] Variables d'environnement documentÃ©es

### Documentation
- [ ] Guide admin (crÃ©er coach, gÃ©rer utilisateurs)
- [ ] Guide coach (login, navigation dashboard)
- [ ] Architecture diagram (flow donnÃ©es)
- [ ] Troubleshooting guide

### Deploy
- [ ] App live sur HTTPS
- [ ] AccÃ¨s admin (credentials)
- [ ] Logs accessibles (Coolify)
- [ ] Backup database configurÃ© (Supabase auto)

---

## ğŸ¯ Post-MVP (Roadmap)

### Quick Wins (Semaine 2-3)
- Export CSV des KPIs avec filtres date
- Filtres date dashboard (7j/30j/90j/custom)
- Dark mode toggle
- Notifications email digest quotidien
- Graphiques interactifs (hover tooltips)

### Features Medium (Mois 2)
- CRM basique : Ã©dition statut lead manuel
- Notes sur leads
- Tags personnalisÃ©s
- Recherche leads par nom/Instagram
- Historique complet conversation lead

### Optimisations Performance
- Cache Redis pour KPIs (si >100 coachs)
- Infinite scroll liste leads
- WebSocket realtime updates (Supabase Realtime)
- PWA avec offline support
- Lazy loading images/components

### IntÃ©grations (Mois 3)
- Webhook ManyChat auto-sync leads temps rÃ©el
- Calendly webhook auto-update calls booked
- Stripe integration tracking revenus rÃ©els
- Telegram bot alertes leads chauds
- Zapier/Make.com connectors

---

## ğŸ“š RÃ©fÃ©rences Techniques

### Documentation Externe
- Supabase Docs : https://supabase.com/docs
- React Router v6 : https://reactrouter.com
- Tailwind CSS : https://tailwindcss.com
- Recharts : https://recharts.org
- Lucide Icons : https://lucide.dev
- Coolify : https://coolify.io/docs

### Scripts & Fichiers RÃ©fÃ©rencÃ©s
- `SUPABASE_MIGRATIONS.sql` : Script SQL complet migrations
- `seed_data.py` : Script Python gÃ©nÃ©ration donnÃ©es test
- `.env.example` : Template variables d'environnement
- `README.md` : Instructions setup projet

---

## ğŸ“ Notes Importantes

### Mapping SchÃ©ma
Le projet utilise votre schÃ©ma Supabase existant avec ces mappings :
- `coachs.name` = nom complet coach (au lieu de `full_name`)
- `leads.user_id_instagram` = identifiant principal Instagram
- `leads.job_title` = mÃ©tier (utilisÃ© pour top professions)
- `leads.status` = nouveau champ normalisÃ© (new/engaged/qualified/won/lost/relance)

### Authentification
Pas de lien automatique entre `auth.users` et `coachs.id`. Pour MVP, crÃ©ation manuelle ou via Edge Function admin.

### N8N Integration
Le webhook N8N doit inclure `coach_id` en query param :
```
https://votre-n8n.com/webhook/setter?coach_id=uuid-du-coach
```

### Performance
Vue matÃ©rialisÃ©e refresh 5 min = 12 fois/heure. Acceptable pour MVP. Si besoin temps rÃ©el strict : remplacer par vue normale + cache.

---

**FIN DU PRD**

**Prochaine Ã©tape** : ExÃ©cuter `SUPABASE_MIGRATIONS.sql` puis dÃ©marrer dÃ©veloppement frontend.